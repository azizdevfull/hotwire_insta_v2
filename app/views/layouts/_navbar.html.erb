<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-light bg-light">
  <style>
    .bg-light{
      align-items: center;
      background-color: rgb(var(--ig-primary-background));
      border-bottom: 1px solid rgb(var(--ig-elevated-separator));
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      height: var(--desktop-nav-height);
      position: fixed;
      top: 0;
      transition: height var(--desktop-nav-anim-duration) ease-in-out;
      width: 100%;
      z-index: 3;
      height: 57px;
    }
  </style>
  <!-- Container wrapper -->
  <div class="container-fluid">
    <!-- Toggle button -->
    <button class="navbar-toggler" type="button" data-mdb-toggle="collapse" data-mdb-target="#navbarCenteredExample"
      aria-controls="navbarCenteredExample" aria-expanded="false" aria-label="Toggle navigation">
      <i class="fas fa-bars"></i>
    </button>
    <!-- Collapsible wrapper -->
    <div class="collapse navbar-collapse justify-content-center" id="navbarCenteredExample">
      <div class="container">
        <div class="row">
          <div class="col-md-1"></div>
          <div class="col-md-5">
            <%= link_to root_path, class:"navbar-brand" do %>
              <img src="https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png"
                height="30" alt="" loading="lazy" />
            <% end %>
          </div>
          
          <div class="col-md-2">
            <form class="d-flex input-group w-auto">
              <div class="mb-5">
                <div data-controller="autocomplete" data-autocomplete-url-value="/users/search">
                  <input name="simple-input" type="text" class="form-control" data-autocomplete-target="input" placeholder="search a user"/>
                  <input type="hidden" name="user_username" data-autocomplete-target="hidden"/>
                  <ul data-autocomplete-target="results" class="list-group"></ul>
                </div>
              </div>
            </form>
          </div>
         
          <div class="col-md-3">
            <ul class="navbar-nav justify-content-center">
              <!-- Icons -->
              <li class="nav-item me-3 me-lg-0">
                <%= link_to root_path, class:"nav-link" do %>
                  <i class="bi bi-house-door-fill" style="font-size: 20px"></i>
                <% end %>
              </li>
              <li class="nav-item me-3 me-lg-0">
                <a class="nav-link" href="#">
                  <i class="bi bi-chat" style="font-size: 20px"></i>
                </a>
              </li>
              <li class="nav-item me-3 me-lg-0">
                <%= link_to new_post_path, class: "nav-link", data: { turbo_frame: "modal" } do %>
                  <i class="bi bi-plus-square" style="font-size: 20px"></i>
                <% end %>
              </li>
              <li class="nav-item me-3 me-lg-0">
                <a class="nav-link" href="#">
                  <i class="bi bi-heart" style="font-size: 20px"></i>
                </a>
              </li>
              <!-- Avatar -->
              <li class="nav-item dropdown">
                <%# <a class="nav-link dropdown-toggle dropdown-toggle-split" href="#" id="navbarDropdownMenuLink"
                  role="button" data-mdb-toggle="dropdown" aria-expanded="false">
                  <img src="https://mdbootstrap.com/img/new/avatars/1.jpg" class="rounded-circle" height="22" alt=""
                    loading="lazy" />
                </a> %>
                <div>
                  <a type="button" class="nav-link " data-bs-toggle="dropdown" aria-expanded="false">
                    <%= image_tag current_user.avatar, class: "rounded-circle", style: "height: 22px; width: 24px;"  if current_user.avatar.attached? %>
                  </a>
                  <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                    <li>
                      <%= link_to profile_path(current_user.id), class:"dropdown-item" do %><i class="bi bi-person-circle"> My Profile</i><% end %>
                    </li>
                    <li><a class="dropdown-item" href="#"><i class="bi bi-gear-wide"></i> Settings</a></li>
                    <hr>
                    <li>
                      <%= button_to "Sign out", destroy_user_session_path, method: :get, class: "dropdown-item" %>
                    </li>
                  </ul>
                </div>
                <%# <a type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal" data-bs-whatever="@mdo">New Post</a> %>
                <%= render 'posts/new' %>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <!-- Collapsible wrapper -->
  </div>
  <!-- Container wrapper -->
</nav>
<!-- Navbar -->
